(self.webpackChunkjupyter_leaflet=self.webpackChunkjupyter_leaflet||[]).push([[138],{8581:(e,t,o)=>{(t=o(3645)(!1)).push([e.id,"/* Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n.leaflet-container {\n    height: 100%;\n    width: 100%;\n}\n\n.jupyter-widgets.leaflet-widgets {\n    height: 400px;\n    overflow: hidden;\n    flex: 1 1 auto;\n}\n\n.jp-LinkedOutputView .jupyter-widgets.leaflet-widgets {\n    min-height: 360px;  /* Min-height required for mirred output in jlab < 0.31.6 */\n    height: 100%;\n}\n\n/* Leaflet crispness override */\n.crisp-image {\n    /* Preserve crisp pixels with scaled up images */\n    image-rendering: optimizeSpeed;             /* Legal fallback */\n    image-rendering: -moz-crisp-edges;          /* Firefox        */\n    image-rendering: -o-crisp-edges;            /* Opera          */\n    image-rendering: -webkit-optimize-contrast; /* Safari         */\n    image-rendering: optimize-contrast;         /* CSS3 Proposed  */\n    image-rendering: crisp-edges;               /* CSS4 Proposed  */\n    image-rendering: pixelated;                 /* CSS4 Proposed  */\n    -ms-interpolation-mode: nearest-neighbor;   /* IE8+           */\n}\n\n/* JupyterLab themes support */\n/* Popup */\n.leaflet-popup-content-wrapper, .leaflet-popup-tip {\n    background-color: var(--jp-layout-color1);\n    color: var(--jp-ui-font-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n}\n\n/* Basic controls */\n.leaflet-bar a, .leaflet-bar a:hover {\n    background-color: var(--jp-layout-color1);\n    color: var(--jp-ui-font-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n}\n\n.leaflet-bar a:hover {\n    background-color: var(--jp-layout-color2);\n    color: var(--jp-ui-font-color2);\n}\n\n.leaflet-bar a.leaflet-disabled {\n    background-color: var(--jp-layout-color3);\n    color: var(--jp-ui-font-color3);\n}\n\n/* Widget control */\n.leaflet-widgetcontrol {\n    background: var(--jp-layout-color1);\n    border-radius: 4.5px;\n    box-shadow: 4px 5px 8px 0px #9e9e9e\n}\n\n/* SplitMap control */\n.leaflet-sbs-divider {\n    background-color: var(--jp-layout-color1);\n}\n\n.leaflet-sbs-range::-webkit-slider-thumb {\n    background-color: var(--jp-layout-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n}\n\n.leaflet-sbs-range::-ms-thumb {\n    background-color: var(--jp-layout-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n}\n\n.leaflet-sbs-range::-moz-range-thumb {\n    background-color: var(--jp-layout-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n}\n\n/* Measure control */\n.leaflet-control-measure {\n    background-color: var(--jp-layout-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n    color: var(--jp-ui-font-color1);\n}\n\n/* Layers control */\n.leaflet-control-layers {\n    background-color: var(--jp-layout-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n    color: var(--jp-ui-font-color1);\n}\n\n.leaflet-control-layers-expanded {\n    background-color: var(--jp-layout-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n    color: var(--jp-ui-font-color1);\n}\n\n/* Attribution control */\n.leaflet-container .leaflet-control-attribution {\n    background-color: var(--jp-layout-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n    color: var(--jp-ui-font-color1);\n}\n\n.leaflet-control-velocity.leaflet-control {\n    background: var(--jp-layout-color1);\n    margin: 0;\n    padding: 0 5px;\n    color: var(--jp-ui-font-color1);\n    font-size: 11px;\n}\n\n/* Legend Control */\ndiv.leaflet-control-legend {\n    color: var(--jp-ui-font-color1);\n   \tline-height: 18px;\n   \twidth: auto;\n    background-color: var(--jp-layout-color1);\n    border-width: var(--jp-border-width);\n    border-color: var(--jp-border-color1);\n  \tborder-radius: 4.5px;\n   \tbox-shadow: 0 1px 5px rgba(0,0,0,0.4);\n   \tpadding: 6px 10px 6px 6px;\n}\n\ndiv.leaflet-control-legend > h4 {\n\tpadding: 0;\n   \tmargin: 0; \n\tmargin-bottom: 5px;\n}\n\ndiv.leaflet-control-legend > i {\n\twidth: 18px;\n   \theight: 18px;\n   \tfloat: left;\n   \tmargin-right: 8px;\n}\n\ndiv.leaflet-control-legend > p {\n\tdisplay: inline-block;\n}\n\n/* Magnifying Glass */\n.leaflet-magnifying-glass {\n  border-radius: 50%;\n  border: 1px solid gray;\n  box-shadow: 0 0 5px gray;\n  position: absolute;\n  overflow: hidden;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n\n.leaflet-magnifying-glass > .leaflet-container {\n  height: \t100%;\n  width: \t100%;\n}\n\n/* Webkit-only workaround for the border-radius clipping bug,\napplied to the map container */\n.leaflet-magnifying-glass-webkit {\n  border-radius: 50%;\n  -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);\n}\n",""]),e.exports=t},907:(e,t,o)=>{var i=o(3379),s=o(8581);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.id,s,""]]);i(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},306:e=>{"use strict";e.exports={version:"0.16.0"}},5195:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletControlModel:()=>l,LeafletControlView:()=>n});const i=o(5335),s=o(8197),a=o(3555);class l extends i.WidgetModel{defaults(){return{...super.defaults(),_view_name:"LeafletControlView",_model_name:"LeafletControlModel",_view_module:"jupyter-leaflet",_model_module:"jupyter-leaflet",options:[],position:"topleft"}}}class n extends a.LeafletWidgetView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}render(){return Promise.resolve(this.create_obj()).then((()=>{this.leaflet_events(),this.model_events()}))}leaflet_events(){}model_events(){for(var e,t=this.model.get("options"),o=0;o<t.length;o++)e=t[o],this.listenTo(this.model,"change:"+e,(function(){s.setOptions(this.obj,this.get_options())}),this)}}},8138:(e,t,o)=>{var i=window.L;e.exports=o(4083),e.exports.version=o(306).version,void 0!==i&&i!==window.L&&(console.log("Existing `L` detected, running ipyleaflet's Leaflet in no-conflict mode as `ipyL`"),ipyL=L.noConflict())},4083:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletAntPathModel:()=>fe,LeafletAntPathView:()=>Le,LeafletAttributionControlModel:()=>He,LeafletAttributionControlView:()=>qe,LeafletAwesomeIconModel:()=>g,LeafletAwesomeIconView:()=>f,LeafletCircleMarkerModel:()=>xe.LeafletCircleMarkerModel,LeafletCircleMarkerView:()=>xe.LeafletCircleMarkerView,LeafletCircleModel:()=>ze,LeafletCircleView:()=>ke,LeafletControlModel:()=>Qe.LeafletControlModel,LeafletControlView:()=>Qe.LeafletControlView,LeafletDivIconModel:()=>Fe,LeafletDivIconView:()=>Be,LeafletDrawControlModel:()=>mt,LeafletDrawControlView:()=>_t,LeafletFeatureGroupModel:()=>Ue.LeafletFeatureGroupModel,LeafletFeatureGroupView:()=>Ue.LeafletFeatureGroupView,LeafletFullScreenControlModel:()=>ft,LeafletFullScreenControlView:()=>Lt,LeafletGeoJSONModel:()=>Ee,LeafletGeoJSONView:()=>Ie,LeafletHeatmapModel:()=>he,LeafletHeatmapView:()=>ce,LeafletIconModel:()=>p,LeafletIconView:()=>m,LeafletImageOverlayModel:()=>Q,LeafletImageOverlayView:()=>Y,LeafletLayerGroupModel:()=>Ge.LeafletLayerGroupModel,LeafletLayerGroupView:()=>Ge.LeafletLayerGroupView,LeafletLayerModel:()=>i.LeafletLayerModel,LeafletLayerView:()=>i.LeafletLayerView,LeafletLayersControlModel:()=>st,LeafletLayersControlView:()=>at,LeafletLegendControlModel:()=>Wt,LeafletLegendControlView:()=>Dt,LeafletLocalTileLayerModel:()=>O,LeafletLocalTileLayerView:()=>S,LeafletMagnifyingGlassModel:()=>B,LeafletMagnifyingGlassView:()=>N,LeafletMapModel:()=>Yt,LeafletMapStyleModel:()=>Qt,LeafletMapView:()=>Xt,LeafletMarkerClusterModel:()=>Oe,LeafletMarkerClusterView:()=>Se,LeafletMarkerModel:()=>r,LeafletMarkerView:()=>d,LeafletMeasureControlModel:()=>rt,LeafletMeasureControlView:()=>dt,LeafletPathModel:()=>me.LeafletPathModel,LeafletPathView:()=>me.LeafletPathView,LeafletPolygonModel:()=>ve.LeafletPolygonModel,LeafletPolygonView:()=>ve.LeafletPolygonView,LeafletPolylineModel:()=>ye.LeafletPolylineModel,LeafletPolylineView:()=>ye.LeafletPolylineView,LeafletPopupModel:()=>x,LeafletPopupView:()=>V,LeafletRasterLayerModel:()=>C.LeafletRasterLayerModel,LeafletRasterLayerView:()=>C.LeafletRasterLayerView,LeafletRectangleModel:()=>je,LeafletRectangleView:()=>Me,LeafletScaleControlModel:()=>Ot,LeafletScaleControlView:()=>St,LeafletSearchControlModel:()=>Rt,LeafletSearchControlView:()=>Ft,LeafletSplitMapControlModel:()=>Ke,LeafletSplitMapControlView:()=>tt,LeafletTileLayerModel:()=>z.LeafletTileLayerModel,LeafletTileLayerView:()=>z.LeafletTileLayerView,LeafletUILayerModel:()=>i.LeafletUILayerModel,LeafletUILayerView:()=>i.LeafletUILayerView,LeafletVectorLayerModel:()=>pe.LeafletVectorLayerModel,LeafletVectorLayerView:()=>pe.LeafletVectorLayerView,LeafletVectorTileLayerModel:()=>P,LeafletVectorTileLayerView:()=>T,LeafletVelocityModel:()=>ae,LeafletVelocityView:()=>le,LeafletVideoOverlayModel:()=>ee,LeafletVideoOverlayView:()=>te,LeafletWMSLayerModel:()=>D,LeafletWMSLayerView:()=>E,LeafletWidgetControlModel:()=>xt,LeafletWidgetControlView:()=>Vt,LeafletZoomControlModel:()=>kt,LeafletZoomControlView:()=>Pt});var i=o(4795);const s=o(5335),a=o(8197),l=o(4795),n=[0,0];class r extends l.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletMarkerView",_model_name:"LeafletMarkerModel",location:n,opacity:1,visible:!0,z_index_offset:0,draggable:!0,keyboard:!0,title:"",alt:"",rise_on_hover:!1,rise_offset:250,rotation_angle:0,rotation_origin:"",icon:null}}}r.serializers={...l.LeafletUILayerModel.serializers,icon:{deserialize:s.unpack_models}};class d extends l.LeafletUILayerView{initialize(e){super.initialize(e),this.icon_promise=Promise.resolve()}create_obj(){this.obj=a.marker(this.model.get("location"),this.get_options()),this.obj.on("dragend",(e=>{var t=e.target.getLatLng();this.model.set("location",[t.lat,t.lng]),this.touch()}))}remove(){super.remove(),this.icon_promise.then((()=>{this.icon&&this.icon.remove()}))}set_icon(e){this.icon&&this.icon.remove(),e&&(this.icon_promise=this.icon_promise.then((()=>this.create_child_view(e).then((e=>{this.obj.setIcon(e.obj),this.icon=e})))))}model_events(){super.model_events(),this.listenTo(this.model,"change:location",(function(){this.obj.setLatLng(this.model.get("location")),this.send({event:"move",location:this.model.get("location")})}),this),this.listenTo(this.model,"change:z_index_offset",(function(){this.obj.setZIndexOffset(this.model.get("z_index_offset"))}),this),this.listenTo(this.model,"change:opacity",(function(){this.model.get("visible")&&this.obj.setOpacity(this.model.get("opacity"))}),this),this.listenTo(this.model,"change:visible",(function(){this.model.get("visible")?this.obj.setOpacity(this.model.get("opacity")):this.obj.setOpacity(0)}),this),this.listenTo(this.model,"change:rotation_angle",(function(){this.obj.setRotationAngle(this.model.get("rotation_angle"))}),this),this.listenTo(this.model,"change:rotation_origin",(function(){this.obj.setRotationOrigin(this.model.get("rotation_origin"))}),this),this.obj.setLatLng(this.model.get("location")),this.obj.setZIndexOffset(this.model.get("z_index_offset")),this.model.get("visible")?this.obj.setOpacity(this.model.get("opacity")):this.obj.setOpacity(0),this.obj.setRotationAngle(this.model.get("rotation_angle")),this.obj.setRotationOrigin(this.model.get("rotation_origin")),this.listenTo(this.model,"change:icon",(function(){this.set_icon(this.model.get("icon"))}),this),this.set_icon(this.model.get("icon"))}}const h=o(8197),c=o(4795);class p extends c.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletIconView",_model_name:"LeafletIconModel",icon_url:"",shadow_url:"",icon_size:null,shadow_size:null,icon_anchor:null,shadow_anchor:null,popup_anchor:[0,0]}}}class m extends c.LeafletUILayerView{create_obj(){this.obj=h.icon(this.get_options())}}const _=o(8197),u=o(4795);class g extends u.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletAwesomeIconView",_model_name:"LeafletAwesomeIconModel",name:"home",marker_color:"blue",icon_color:"blue",spin:!1}}}class f extends u.LeafletUILayerView{create_obj(){this.obj=_.AwesomeMarkers.icon({prefix:"fa",icon:this.model.get("name"),markerColor:this.model.get("marker_color"),iconColor:this.model.get("icon_color"),spin:this.model.get("spin")})}}const y=o(5335),v=o(8197),w=o(4795),b=o(3211),j=o(3706),M=[0,0];class x extends w.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletPopupView",_model_name:"LeafletPopupModel",location:M,child:null,min_width:50,max_width:300,max_height:null}}}x.serializers={...w.LeafletUILayerModel.serializers,child:{deserialize:y.unpack_models}};class V extends w.LeafletUILayerView{create_obj(){this.obj=v.popup(this.get_options()).setLatLng(this.model.get("location")),this.model.on("msg:custom",this.handle_message.bind(this))}initialize(e){super.initialize(e),this.child_promise=Promise.resolve()}render(){return super.render(),this.set_child(this.model.get("child"))}remove(){super.remove(),this.child_promise.then((()=>{this.child&&this.child.remove()}))}set_child(e){return this.child&&this.child.remove(),e&&(this.child_promise=this.child_promise.then((()=>this.create_child_view(e).then((e=>{b.MessageLoop.sendMessage(e.pWidget,j.Widget.Msg.BeforeAttach),this.obj.setContent(e.el),b.MessageLoop.sendMessage(e.pWidget,j.Widget.Msg.AfterAttach),this.force_update(),this.child=e,this.trigger("child:created")}))))),this.child_promise}leaflet_events(){super.leaflet_events(),this.obj.on("add",(e=>{window.dispatchEvent(new Event("resize"))}))}model_events(){super.model_events(),this.model.on("change:child",(()=>{this.set_child(this.model.get("child"))})),this.model.on_some_change(["min_width","max_width","max_height"],this.update_popup,this)}update_popup(){v.setOptions(this.obj,this.get_options()),this.force_update()}force_update(){this.map_view.obj.hasLayer(this.obj)?(this.map_view.obj.closePopup(this.obj),this.map_view.obj.openPopup(this.obj)):(this.map_view.obj.openPopup(this.obj),this.map_view.obj.closePopup(this.obj))}handle_message(e){"open"==e.msg?this.map_view.obj.openPopup(this.obj,e.location):"close"==e.msg&&this.map_view.obj.closePopup(this.obj)}}var C=o(6004),z=o(6231);const k=o(4795);class P extends k.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletVectorTileLayerView",_model_name:"LeafletVectorTileLayerModel",url:"",vectorTileLayerStyles:{}}}}class T extends k.LeafletLayerView{create_obj(){var e={...this.get_options(),rendererFactory:L.canvas.tile};this.obj=L.vectorGrid.protobuf(this.model.get("url"),e),this.model.on("msg:custom",this.handle_message.bind(this))}model_events(){super.model_events(),this.listenTo(this.model,"change:url",(function(){this.obj.setUrl(this.model.get("url"))}),this)}handle_message(e){"redraw"==e.msg&&this.obj.redraw()}}const A=o(6231);class O extends A.LeafletTileLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletLocalTileLayerView",_model_name:"LeafletLocalTileLayerModel",path:""}}}class S extends A.LeafletTileLayerView{create_obj(){this.model.set("url",this.model.get("path")),this.model.save_changes(),super.create_obj()}}const G=o(8197),U=o(6231),W=o(4382);class D extends U.LeafletTileLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletWMSLayerView",_model_name:"LeafletWMSLayerModel",layers:"",styles:"",format:"image/jpeg",transparent:!1,crs:null,uppercase:!1}}}class E extends U.LeafletTileLayerView{create_obj(){this.obj=G.tileLayer.wms(this.model.get("url"),{...this.get_options(),crs:W.getProjection(this.model.get("crs"))})}model_events(){for(var e in super.model_events(),this.get_options())this.model.on("change:"+e,(()=>{this.obj.setParams(this.get_options(),!0),this.obj.refresh()}))}}const I=o(5335),Z=o(8197),R=o(6004),F=o(4795);class B extends R.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletMagnifyingGlassView",_model_name:"LeafletMagnifyingGlassModel",radius:100,zoomOffset:3,fixedZoom:-1,fixedPosition:!1,latLng:[],layers:[]}}}B.serializers={...I.WidgetModel.serializers,layers:{deserialize:I.unpack_models}};class N extends F.LeafletLayerView{remove_layer_view(e){e.remove()}add_layer_model(e){return this.create_child_view(e).then((e=>e.obj))}create_obj(){this.layer_views=new I.ViewList(this.add_layer_model,this.remove_layer_view,this);var e=this.get_options().layers;return this.layer_views.update(e).then((e=>{var t=this.get_options();t.layers=e,this.obj=Z.magnifyingGlass(t)}))}model_events(){var e;super.model_events();for(var t=this.model.get("options"),o=0;o<t.length;o++)e=t[o],this.listenTo(this.model,"change:"+e,(function(){this.map_view.obj.removeLayer(this.obj),this.create_obj().then((()=>{this.map_view.obj.addLayer(this.obj)}))}),this)}}const J=o(8197),H=o(6004),q=[0,0];class Q extends H.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletImageOverlayView",_model_name:"LeafletImageOverlayModel",url:"",bounds:[q,q],attribution:""}}}class Y extends H.LeafletRasterLayerView{create_obj(){this.obj=J.imageOverlay(this.model.get("url"),this.model.get("bounds"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:url",(function(){const e=this.model.get("url");this.obj.setUrl(e)}),this),this.listenTo(this.model,"change:bounds",(function(){const e=this.model.get("bounds");this.obj.setBounds(e)}),this)}}const X=o(8197),$=o(6004),K=[0,0];class ee extends $.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletVideoOverlayView",_model_name:"LeafletVideoOverlayModel",url:"",bounds:[K,K],attribution:""}}}class te extends $.LeafletRasterLayerView{create_obj(){this.obj=X.videoOverlay(this.model.get("url"),this.model.get("bounds"),this.get_options()),this.obj.on("load",(()=>{var e=X.Control.extend({onAdd:()=>{var e=X.DomUtil.create("button");return e.innerHTML="&#10074&#10074",X.DomEvent.on(e,"click",(()=>{this.obj.getElement().pause()})),e}}),t=X.Control.extend({onAdd:()=>{var e=X.DomUtil.create("button");return e.innerHTML="&#9658",X.DomEvent.on(e,"click",(()=>{this.obj.getElement().play()})),e}});(new e).addTo(this.map_view.obj),(new t).addTo(this.map_view.obj)}))}model_events(){super.model_events(),this.listenTo(this.model,"change:url",(function(){const e=this.model.get("url"),t=this.model.get("bounds"),o=this.get_options();this.map_view.obj.removeLayer(this.obj),this.obj=X.videoOverlay(e,t,o),this.map_view.obj.addLayer(this.obj)}),this),this.listenTo(this.model,"change:bounds",(function(){const e=this.model.get("url"),t=this.model.get("bounds"),o=this.get_options();this.map_view.obj.removeLayer(this.obj),this.obj=X.videoOverlay(e,t,o),this.map_view.obj.addLayer(this.obj)}),this)}}const oe=o(8197),ie=o(4795),se=o(3555);class ae extends ie.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletVelocityView",_model_name:"LeafletVelocityModel",displayValues:!0,displayOptions:{velocityType:"Global Wind",position:"bottomleft",emptyString:"No velocity data",angleConvention:"bearingCW",displayPosition:"bottomleft",displayEmptyString:"No velocity data",speedUnit:"kt"},data:[],minVelocity:0,maxVelocity:10,velocityScale:.005,colorScale:[]}}}class le extends ie.LeafletLayerView{create_obj(){var e=this.get_options();e.data=this.model.get("data"),this.obj=oe.velocityLayer(e)}model_events(){super.model_events(),this.listenTo(this.model,"change:data",(function(){const e=this.model.get("data");this.obj.setData(e)}),this);var e="display_options";this.listenTo(this.model,"change:"+e,(function(){var t={};t[se.camel_case(e)]={...this.model.get(e)},oe.setOptions(this.obj,t)}),this)}}const ne=o(8197),re=o(6004),de=o(4795);class he extends re.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletHeatmapView",_model_name:"LeafletHeatmapModel",locations:[],minOpacity:.05,maxZoom:18,max:1,radius:25,blur:15,gradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"}}}}class ce extends de.LeafletLayerView{create_obj(){this.obj=ne.heatLayer(this.model.get("locations"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:locations",(function(){this.obj.setLatLngs(this.model.get("locations"))}),this)}}var pe=o(2610),me=o(5529);const _e=o(8197),ue=o(2610),{antPath:ge}=o(5432);class fe extends ue.LeafletVectorLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletAntPathView",_model_name:"LeafletAntPathModel",use:"polyline",delay:400,weight:5,dash_array:[10,20],color:"#0000FF",pulse_color:"#FFFFFF",paused:!1,reverse:!1,hardware_accelerated:!1,radius:10}}}class Le extends ue.LeafletVectorLayerView{create_obj(){this.obj=ge(this.model.get("locations"),this.get_ant_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:locations",(function(){this.obj.setLatLngs(this.model.get("locations"))}),this),this.model.on_some_change(this.model.get("options"),(()=>{this.obj.setStyle(this.get_ant_options())})),this.obj.setStyle(this.get_ant_options())}get_ant_options(){const e=this.get_options();return"circle"!=e.use&&delete e.radius,e.use=_e[e.use],e}}var ye=o(9770),ve=o(5321);const we=o(8197),be=o(5321);class je extends be.LeafletPolygonModel{defaults(){return{...super.defaults(),_view_name:"LeafletRectangleView",_model_name:"LeafletRectangleModel",bounds:[]}}}class Me extends be.LeafletPolygonView{create_obj(){this.obj=we.rectangle(this.model.get("bounds"),this.get_options())}}var xe=o(587);const Ve=o(8197),Ce=o(587);class ze extends Ce.LeafletCircleMarkerModel{defaults(){return{...super.defaults(),_view_name:"LeafletCircleView",_model_name:"LeafletCircleModel"}}}class ke extends Ce.LeafletCircleMarkerView{create_obj(){this.obj=Ve.circle(this.model.get("location"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:radius",(function(){this.obj.setRadius(this.get_options().radius)}),this)}}const Pe=o(5335),Te=o(8197),Ae=o(4795);o(3555);class Oe extends Ae.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletMarkerClusterView",_model_name:"LeafletMarkerClusterModel",markers:[],disableClusteringAtZoom:18,maxClusterRadius:80}}}Oe.serializers={...Pe.WidgetModel.serializers,markers:{deserialize:Pe.unpack_models}};class Se extends Ae.LeafletLayerView{model_events(){super.model_events(),this.listenTo(this.model,"change:markers",(function(e,t){this.marker_views.update(e.get("markers"))}),this)}remove_layer_view(e){this.obj.removeLayer(e.obj),e.remove()}add_layer_model(e){return this.create_child_view(e,{map_view:this.map_view}).then((e=>(this.obj.addLayer(e.obj),e)))}create_obj(){var e=this.get_options();this.obj=Te.markerClusterGroup(e),this.marker_views=new Pe.ViewList(this.add_layer_model,this.remove_layer_view,this),this.marker_views.update(this.model.get("markers"))}}var Ge=o(6464),Ue=o(3090);const We=o(8197),De=o(3090);class Ee extends De.LeafletFeatureGroupModel{defaults(){return{...super.defaults(),_view_name:"LeafletGeoJSONView",_model_name:"LeafletGeoJSONModel",data:{},style:{},hover_style:{},point_style:{}}}}class Ie extends De.LeafletFeatureGroupView{create_obj(){var e={style:e=>{const t=this.model.get("style");return{...e.properties.style||{},...t}},onEachFeature:(e,t)=>{var o=o=>{"mouseover"==o.type&&(t.setStyle(this.model.get("hover_style")),t.once("mouseout",(()=>{this.obj.resetStyle(t)}))),this.send({event:o.type,feature:e,properties:e.properties,id:e.id})};t.on({mouseover:o,click:o})}},t=this.model.get("point_style");0!==Object.keys(t).length&&(e.pointToLayer=function(e,o){return new We.CircleMarker(o,t)}),this.obj=We.geoJson(this.model.get("data"),e)}model_events(){this.listenTo(this.model,"change:style",(function(){this.obj.setStyle(this.model.get("style"))}),this),this.listenTo(this.model,"change:data",(function(){this.obj.clearLayers(),this.obj.addData(this.model.get("data"))}),this)}}const Ze=o(8197),Re=o(4795);class Fe extends Re.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletDivIconView",_model_name:"LeafletDivIconModel",html:"",bg_pos:[0,0],icon_size:null,icon_anchor:null,popup_anchor:[0,0]}}}class Be extends Re.LeafletUILayerView{create_obj(){this.obj=Ze.divIcon(this.get_options())}}const Ne=o(8197),Je=o(5195);class He extends Je.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletAttributionControlView",_model_name:"LeafletAttributionControlModel"}}}class qe extends Je.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=Ne.control.attribution(this.get_options())}}var Qe=o(5195);const Ye=o(5335),Xe=o(8197),$e=o(5195);class Ke extends $e.LeafletControlModel{default(){return{...super.defaults(),_view_name:"LeafletSplitMapControlView",_model_name:"LeafletSplitMapControlModel",left_layer:void 0,right_layer:void 0}}}function et(e){return Array.isArray(e)?e:[e]}Ke.serializers={...$e.LeafletControlModel,left_layer:{deserialize:Ye.unpack_models},right_layer:{deserialize:Ye.unpack_models}};class tt extends $e.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){var e=et(this.model.get("left_layer")),t=et(this.model.get("right_layer")),o=this.map_view.model.get("layers");return o=o.concat(e,t),this.map_view.layer_views.update(o).then((o=>{var i=[],s=[];o.forEach((o=>{e.includes(o.model)&&i.push(o.obj),t.includes(o.model)&&s.push(o.obj)})),this.obj=Xe.control.splitMap(i,s)}))}}const ot=o(8197),it=o(5195);class st extends it.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletLayersControlView",_model_name:"LeafletLayersControlModel"}}}class at extends it.LeafletControlView{initialize(e){super.initialize(e),super.initialize(e),this.map_view=this.options.map_view}toggle_obj(){this.obj.remove(),delete this.obj,this.create_obj()}model_events(){this.listenTo(this.map_view.model,"change:layers",(()=>{this.toggle_obj()}))}create_obj(){return Promise.all(this.map_view.layer_views.views).then((e=>{var t=e.reduce((function(e,t){return t.model.get("base")&&(e[t.model.get("name")]=t.obj),e}),{}),o=e.reduce((function(e,t){return t.model.get("base")||(e[t.model.get("name")]=t.obj),e}),{});return this.obj=ot.control.layers(t,o,this.get_options()),this})).then((()=>{this.obj.addTo(this.map_view.obj)}))}}const lt=o(8197),nt=o(5195);class rt extends nt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletMeasureControlView",_model_name:"LeafletMeasureControlModel",primary_length_unit:"feet",secondary_length_unit:void 0,primary_area_unit:"acres",secondar_area_unit:void 0,active_color:"#ABE67E",completed_color:"#C8F2BE",popup_options:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]},capture_z_index:1e4,_custom_units:{}}}}class dt extends nt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=lt.control.measure(this.get_options()),this.default_units=lt.extend({},this.obj.options.units)}get_options(){const e=super.get_options();return e.units=lt.extend({},this.default_units,this.model.get("_custom_units")),e}model_events(){for(var e,t=this.model.get("options"),o=0;o<t.length;o++)e=t[o],this.listenTo(this.model,"change:"+e,(function(){this.obj.initialize(this.get_options())}),this)}}const ht=o(5335),ct=o(8197),pt=o(5195);class mt extends pt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletDrawControlView",_model_name:"LeafletDrawControlModel",polyline:{shapeOptions:{}},polygon:{shapeOptions:{}},circle:{},circlemarker:{},rectangle:{},marker:{},data:[],edit:!0,remove:!0}}}mt.serializers={...pt.LeafletControlModel.serializers,layer:{deserialize:ht.unpack_models}};class _t extends pt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.feature_group=ct.geoJson([],{style:function(e){return e.properties.style}}),this.data_to_layers(),this.map_view.obj.addLayer(this.feature_group);var e=this.model.get("polyline");Object.keys(e).length||(e=!1);var t=this.model.get("polygon");Object.keys(t).length||(t=!1);var o=this.model.get("circle");Object.keys(o).length||(o=!1);var i=this.model.get("circlemarker");Object.keys(i).length||(i=!1);var s=this.model.get("rectangle");Object.keys(s).length||(s=!1);var a=this.model.get("marker");Object.keys(a).length||(a=!1),this.obj=new ct.Control.Draw({position:this.model.get("position"),edit:{featureGroup:this.feature_group,edit:this.model.get("edit"),remove:this.model.get("remove")},draw:{polyline:e,polygon:t,circle:o,circlemarker:i,rectangle:s,marker:a}}),this.map_view.obj.on("draw:created",(e=>{var t=e.layer,o=t.toGeoJSON();o.properties.style=t.options,this.send({event:"draw:created",geo_json:o}),this.feature_group.addLayer(t),this.layers_to_data()})),this.map_view.obj.on("draw:edited",(e=>{e.layers.eachLayer((e=>{var t=e.toGeoJSON();t.properties.style=e.options,this.send({event:"draw:edited",geo_json:t})})),this.layers_to_data()})),this.map_view.obj.on("draw:deleted",(e=>{e.layers.eachLayer((e=>{var t=e.toGeoJSON();t.properties.style=e.options,this.send({event:"draw:deleted",geo_json:t})})),this.layers_to_data()})),this.model.on("msg:custom",this.handle_message.bind(this)),this.model.on("change:data",this.data_to_layers.bind(this))}remove(){this.map_view.obj.removeLayer(this.feature_group),this.map_view.obj.off("draw:created"),this.map_view.obj.off("draw:edited"),this.map_view.obj.off("draw:deleted"),this.model.off("msg:custom"),this.model.off("change:data")}data_to_layers(){const e=this.model.get("data");this.feature_group.clearLayers(),this.feature_group.addData(e)}layers_to_data(){let e=[];this.feature_group.eachLayer((t=>{const o=t.toGeoJSON();o.properties.style=t.options,e.push(o)})),this.model.set("data",e),this.model.save_changes()}handle_message(e){"clear"==e.msg?this.feature_group.eachLayer((e=>{this.feature_group.removeLayer(e)})):"clear_polylines"==e.msg?this.feature_group.eachLayer((e=>{e instanceof ct.Polyline&&!(e instanceof ct.Polygon)&&this.feature_group.removeLayer(e)})):"clear_polygons"==e.msg?this.feature_group.eachLayer((e=>{e instanceof ct.Polygon&&!(e instanceof ct.Rectangle)&&this.feature_group.removeLayer(e)})):"clear_circles"==e.msg?this.feature_group.eachLayer((e=>{e instanceof ct.CircleMarker&&this.feature_group.removeLayer(e)})):"clear_circle_markers"==e.msg?this.feature_group.eachLayer((e=>{e instanceof ct.CircleMarker&&!(e instanceof ct.Circle)&&this.feature_group.removeLayer(e)})):"clear_rectangles"==e.msg?this.feature_group.eachLayer((e=>{e instanceof ct.Rectangle&&this.feature_group.removeLayer(e)})):"clear_markers"==e.msg&&this.feature_group.eachLayer((e=>{e instanceof ct.Marker&&this.feature_group.removeLayer(e)})),this.layers_to_data()}}const ut=o(8197),gt=o(5195);class ft extends gt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletFullScreenControlView",_model_name:"LeafletFullScreenControlModel"}}}class Lt extends gt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=ut.control.fullscreen(this.get_options())}}const yt=o(5335),vt=o(8197),wt=o(5195),bt=o(3211),jt=o(3706);class Mt extends vt.Control{updateLayout(e){this._container&&Object.keys(e).forEach((t=>{this._container.style[t]=e[t]+"px"}))}getContent(){return this._content}setContent(e){if(this._map)return this._content=e,this._container.appendChild(this._content),this}onAdd(e){return this.options.transparentBg?this._container=vt.DomUtil.create("div"):this._container=vt.DomUtil.create("div","leaflet-widgetcontrol"),vt.DomEvent.disableClickPropagation(this._container),vt.DomEvent.disableScrollPropagation(this._container),this._container}}vt.Control.WidgetControl=Mt,vt.control.widgetcontrol=function(e){return new vt.Control.WidgetControl(e)};class xt extends wt.LeafletControlModel{defaults(){return{_view_name:"LeafletWidgetControlView",_model_name:"LeafletWidgetControlModel",widget:null,max_width:null,min_width:null,max_height:null,min_height:null,transparent_bg:!1}}}xt.serializers={...wt.LeafletControlModel.serializers,widget:{deserialize:yt.unpack_models}};class Vt extends wt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view,this.widget_view=void 0}set_widget(e){if(this.widget_view&&(this.widget_view.remove(),this.widget_view=void 0),e)return this.create_child_view(e).then((e=>{this.widget_view=e,this.displayed.then((()=>{this.widget_view.trigger("displayed",this),this.widget_view.displayed.then((()=>{this.updateLayout(),bt.MessageLoop.sendMessage(e.pWidget,jt.Widget.Msg.BeforeAttach),this.obj.setContent(e.el),bt.MessageLoop.sendMessage(e.pWidget,jt.Widget.Msg.AfterAttach)}))}))}))}create_obj(){this.obj=vt.control.widgetcontrol(this.get_options()),this.set_widget(this.model.get("widget"))}model_events(){super.model_events(),this.listenTo(this.model,"change:min_width change:min_height change:max_width change:max_height",(()=>{this.updateLayout()})),this.listenTo(this.model,"change:widget",(function(e){this.set_widget(this.model.get("widget"))}))}updateLayout(){this.obj.updateLayout({maxWidth:this.model.get("max_width"),minWidth:this.model.get("min_width"),maxHeight:this.model.get("max_height"),minHeight:this.model.get("min_height")})}}const Ct=o(8197),zt=o(5195);class kt extends zt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletZoomControlView",_model_name:"LeafletZoomControlModel",zoom_in_text:"+",zoom_in_title:"Zoom in",zoom_out_text:"-",zoom_out_title:"Zoom out"}}}class Pt extends zt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=Ct.control.zoom(this.get_options())}}const Tt=o(8197),At=o(5195);class Ot extends At.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletScaleControlView",_model_name:"LeafletScaleControlModel"}}}class St extends At.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=Tt.control.scale(this.get_options())}}const Gt=o(8197),Ut=o(5195);class Wt extends Ut.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletLegendControlView",_model_name:"LeafletLegendControlModel",title:"Legend",legend:{"value 1":"#AAF","value 2":"#55A","value 3":"#005"},position:"bottomright"}}}class Dt extends Ut.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}render(){this.create_obj(),this.model.on("change:title",this.titleChanged,this),this.model.on("change:position",this.positionChanged,this),this.model.on("change:legend",this.legendChanged,this)}create_obj(e,t,o){let i=Gt.control({position:this.model.get("position")});i.onAdd=e=>{let t=Gt.DomUtil.create("div","leaflet-control-legend");return this.addContent(t),t},this.obj=i}legendChanged(){let e=this.obj.getContainer();Gt.DomUtil.empty(e),this.addContent(e)}positionChanged(){this.obj.setPosition(this.model.get("position"))}titleChanged(){this.obj.getContainer().getElementsByTagName("h4")[0].textContent=this.model.get("title")}addContent(e){let t=document.createElement("h4");t.textContent=this.model.get("title"),e.appendChild(t);let o=this.model.get("legend");for(let t in o){let i=document.createElement("i");i.style=`background-color: ${o[t]}`,e.appendChild(i),e.innerHTML+=`<p>${t} </p></br>`}}}const Et=o(5335),It=o(8197),Zt=o(5195);class Rt extends Zt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletSearchControlView",_model_name:"LeafletSearchControlModel",url:null,jsonp_param:"json_callback",property_name:"display_name",property_loc:["lat","lon"],auto_type:!1,auto_collapse:!1,zoom:null,animate_location:!1,found_style:{fillColor:"#3f0",color:"#0f0"},marker:null,layer:null}}}Rt.serializers={...Zt.LeafletControlModel.serializers,marker:{deserialize:Et.unpack_models},layer:{deserialize:Et.unpack_models}};class Ft extends Zt.LeafletControlView{create_obj(){const e=this.model.get("layer"),t=this.model.get("marker"),o=null!==e?this.create_child_view(e):Promise.resolve(null),i=null!==t?this.create_child_view(t):Promise.resolve(null);return Promise.all([o,i]).then((e=>{const t=e[0],o=e[1],i=this.get_options();i.layer=null!==t?t.obj:null,i.marker=null!==o&&o.obj,this.obj=It.control.search(i)}))}leaflet_events(){this.obj.on("search:locationfound",(e=>{if(null!==e.layer){var t=this.model.get("found_style");e.layer.setStyle(t),e.layer._popup&&e.layer.openPopup()}this.send({event:"locationfound",text:e.text,feature:null!==e.layer?e.layer.feature:null,location:[e.latlng.lat,e.latlng.lng]})}))}}const Bt=o(5335),Nt=o(8197),Jt=o(3555),Ht=o(4382),qt=[0,0];class Qt extends Bt.StyleModel{defaults(){return{...super.defaults(),_model_name:"LeafletMapStyleModel",_model_module:"jupyter-leaflet"}}}Qt.styleProperties={cursor:{selector:".leaflet-grab",attribute:"cursor",default:"grab"}};class Yt extends Bt.DOMWidgetModel{defaults(){return{...super.defaults(),_view_name:"LeafletMapView",_model_name:"LeafletMapModel",_model_module:"jupyter-leaflet",_view_module:"jupyter-leaflet",center:qt,zoom_start:12,zoom:12,max_zoom:18,min_zoom:1,dragging:!0,touch_zoom:!0,zoom_delta:1,zoom_snap:1,scroll_wheel_zoom:!1,double_click_zoom:!0,box_zoom:!0,tap:!0,tap_tolerance:15,world_copy_jump:!1,close_popup_on_click:!0,bounce_at_zoom_limits:!0,keyboard:!0,keyboard_pan_offset:80,keyboard_zoom_offset:1,inertia:!0,inertia_deceleration:3e3,inertia_max_speed:1500,zoom_animation_threshold:4,south:qt[0],north:qt[0],east:qt[1],west:qt[1],bottom:0,top:9007199254740991,right:0,left:9007199254740991,options:[],layers:[],controls:[],crs:{name:"EPSG3857",custom:!1},style:null,default_style:null,dragging_style:null,_dragging:!1}}initialize(e,t){super.initialize(e,t),this.set("window_url",window.location.href)}update_style(){var e;e=this.get("_dragging")?this.get("dragging_style"):this.get("default_style"),this.set("style",e)}update_bounds(){return Bt.resolvePromisesDict(this.views).then((e=>{var t={north:-90,south:90,east:-180,west:180},o={top:9007199254740991,bottom:0,right:0,left:9007199254740991};Object.keys(e).reduce((function(t,o){var i=t[0],s=t[1],a=e[o].obj;if(a){var l=a.getBounds();i.north=Math.max(i.north,l.getNorth()),i.south=Math.min(i.south,l.getSouth()),i.east=Math.max(i.east,l.getEast()),i.west=Math.min(i.west,l.getWest());var n=a.getPixelBounds(),r=n.getTopLeft(),d=n.getBottomRight();s.top=Math.min(s.top,r.y),s.bottom=Math.max(s.bottom,d.y),s.right=Math.max(s.right,d.x),s.left=Math.min(s.left,r.x)}return[i,s]}),[t,o]),this.set("north",t.north),this.set("south",t.south),this.set("east",t.east),this.set("west",t.west),this.set("top",o.top),this.set("bottom",o.bottom),this.set("right",o.right),this.set("left",o.left)}))}}Yt.serializers={...Bt.DOMWidgetModel.serializers,layers:{deserialize:Bt.unpack_models},controls:{deserialize:Bt.unpack_models},style:{deserialize:Bt.unpack_models},default_style:{deserialize:Bt.unpack_models},dragging_style:{deserialize:Bt.unpack_models}};class Xt extends Jt.LeafletDOMWidgetView{initialize(e){super.initialize(e),this.dirty=!1}remove_layer_view(e){this.obj.removeLayer(e.obj),e.remove()}add_layer_model(e){return this.create_child_view(e,{map_view:this}).then((e=>(this.obj.addLayer(e.obj),this.displayed.then((()=>{e.trigger("displayed",this)})),e)))}remove_control_view(e){this.obj.removeControl(e.obj),e.remove()}add_control_model(e){return this.create_child_view(e,{map_view:this}).then((e=>(this.obj.addControl(e.obj),this.displayed.then((()=>{e.trigger("displayed",this)})),e)))}render(){super.render(),this.el.classList.add("jupyter-widgets"),this.el.classList.add("leaflet-widgets"),this.map_container=document.createElement("div"),this.el.appendChild(this.map_container),"nearest"==this.get_options().interpolation&&this.map_container.classList.add("crisp-image"),this.layer_views=new Bt.ViewList(this.add_layer_model,this.remove_layer_view,this),this.control_views=new Bt.ViewList(this.add_control_model,this.remove_control_view,this),this.displayed.then(this.render_leaflet.bind(this))}render_leaflet(){this.create_obj().then((()=>(this.layer_views.update(this.model.get("layers")),this.control_views.update(this.model.get("controls")),this.leaflet_events(),this.model_events(),this.model.update_bounds().then((()=>{this.touch()})),this)))}create_obj(){return this.layoutPromise.then((()=>{var e={...this.get_options(),crs:Ht.getProjection(this.model.get("crs")),zoomControl:!1,attributionControl:!1};this.obj=Nt.map(this.map_container,e)}))}leaflet_events(){this.obj.on("moveend",(e=>{if(!this.dirty){this.dirty=!0;var t=e.target.getCenter();this.model.set("center",[t.lat,t.lng]),this.dirty=!1}this.model.update_bounds().then((()=>{this.touch()})),this.model.set("_dragging",!1),this.model.update_style()})),this.obj.on("movestart",(()=>{this.model.set("_dragging",!0),this.model.update_style()})),this.obj.on("zoomend",(e=>{if(!this.dirty){this.dirty=!0;var t=e.target.getZoom();this.model.set("zoom",t),this.dirty=!1}this.model.update_bounds().then((()=>{this.touch()}))})),this.obj.on("click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu preclick",(e=>{this.send({event:"interaction",type:e.type,coordinates:[e.latlng.lat,e.latlng.lng],location:this.model.get("location")})})),this.obj.on("fullscreenchange",(()=>{this.model.set("fullscreen",this.obj.isFullscreen())}))}model_events(){for(var e,t=this.model.get("options"),o=0;o<t.length;o++)e=t[o],this.listenTo(this.model,"change:"+e,(function(){Nt.setOptions(this.obj,this.get_options())}),this);this.listenTo(this.model,"msg:custom",this.handle_msg,this),this.listenTo(this.model,"change:layers",(function(){this.layer_views.update(this.model.get("layers"))}),this),this.listenTo(this.model,"change:controls",(function(){this.control_views.update(this.model.get("controls"))}),this),this.listenTo(this.model,"change:zoom",(function(){this.dirty||(this.dirty=!0,this.obj.flyTo(this.model.get("center"),this.model.get("zoom"),{animate:!1}),this.dirty=!1),this.model.update_bounds().then((()=>{this.touch()}))}),this),this.listenTo(this.model,"change:center",(function(){this.dirty||(this.dirty=!0,this.obj.panTo(this.model.get("center")),this.dirty=!1),this.model.update_bounds().then((()=>{this.touch()}))}),this),this.listenTo(this.model,"change:dragging_style",(function(){this.model.update_style()}),this),this.listenTo(this.model,"change:default_style",(function(){this.model.update_style()}),this),this.listenTo(this.model,"change:fullscreen",(function(){var e=this.model.get("fullscreen");this.obj.isFullscreen()!==e&&this.obj.toggleFullscreen()}),this)}handle_msg(e){e.method}processLuminoMessage(e){switch(super.processLuminoMessage(e),e.type){case"resize":case"after-show":this.dirty=!0,this.obj.invalidateSize({animate:!1,pan:!0}),this.dirty=!1}}}o(623),o(3302),o(4438),o(7256),o(8618),o(9800),o(7873),o(8359),o(3400),o(907),o(3976)},587:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletCircleMarkerModel:()=>l,LeafletCircleMarkerView:()=>n});const i=o(8197),s=o(5529),a=[0,0];class l extends s.LeafletPathModel{defaults(){return{...super.defaults(),_view_name:"LeafletCircleMarkerView",_model_name:"LeafletCircleMarkerModel",location:a}}}class n extends s.LeafletPathView{create_obj(){this.obj=i.circleMarker(this.model.get("location"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:location",(function(){this.obj.setLatLng(this.model.get("location"))}),this)}}},3090:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletFeatureGroupModel:()=>a,LeafletFeatureGroupView:()=>l});const i=o(8197),s=o(6464);class a extends s.LeafletLayerGroupModel{defaults(){return{...super.defaults(),_view_name:"LeafletFeatureGroupView",_model_name:"LeafletFeatureGroupModel"}}}class l extends s.LeafletLayerGroupView{create_obj(){this.obj=i.featureGroup()}}},4795:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletLayerModel:()=>r,LeafletUILayerModel:()=>d,LeafletLayerView:()=>h,LeafletUILayerView:()=>c});const i=o(5335),s=o(3211),a=o(3706),l=o(8197),n=o(3555);class r extends i.WidgetModel{defaults(){return{...super.defaults(),_view_name:"LeafletLayerView",_model_name:"LeafletLayerModel",_view_module:"jupyter-leaflet",_model_module:"jupyter-leaflet",opacity:1,bottom:!1,options:[],name:"",base:!1,popup:null,popup_min_width:50,popup_max_width:300,popup_max_height:null}}}r.serializers={...i.WidgetModel.serializers,popup:{deserialize:i.unpack_models}};class d extends r{defaults(){return{...super.defaults(),_view_name:"LeafletUILayerView",_model_name:"LeafletUILayerModel"}}}class h extends n.LeafletWidgetView{initialize(e){super.initialize(e),this.map_view=this.options.map_view,this.popup_content_promise=Promise.resolve()}render(){return Promise.resolve(this.create_obj()).then((()=>{this.leaflet_events(),this.model_events(),this.bind_popup(this.model.get("popup")),this.listenTo(this.model,"change:popup",(function(e,t){this.bind_popup(t)}))}))}leaflet_events(){this.obj.on&&(this.obj.on("click dblclick mousedown mouseup mouseover mouseout",(e=>{this.send({event:"interaction",type:e.type,coordinates:[e.latlng.lat,e.latlng.lng]})})),this.obj.on("popupopen",(e=>{window.dispatchEvent(new Event("resize"))})),this.obj.transform&&(this.obj.on("add",(()=>{this.update_transform()})),this.obj.on("transformed",(()=>{this.model.set("locations",this.obj.getLatLngs()),this.touch()}))))}model_events(){for(var e,t=this.model.get("options"),o=0;o<t.length;o++)e=t[o],this.listenTo(this.model,"change:"+e,(function(){l.setOptions(this.obj,this.get_options())}),this);this.model.on_some_change(["popup_min_width","popup_max_width","popup_max_height"],this.update_popup,this)}remove(){super.remove(),this.popup_content_promise.then((()=>{this.popup_content&&this.popup_content.remove()}))}bind_popup(e){return this.popup_content&&(this.obj.unbindPopup(),this.popup_content.remove()),e&&(this.popup_content_promise=this.popup_content_promise.then((()=>this.create_child_view(e,{map_view:this.map_view}).then((t=>{"LeafletPopupModel"==e.name?this.obj.bindPopup(t.obj,this.popup_options()):(s.MessageLoop.sendMessage(t.pWidget,a.Widget.Msg.BeforeAttach),this.obj.bindPopup(t.el,this.popup_options()),s.MessageLoop.sendMessage(t.pWidget,a.Widget.Msg.AfterAttach)),this.popup_content=t,this.trigger("popup_content:created")}))))),this.popup_content_promise}popup_options(){return{minWidth:this.model.get("popup_min_width"),maxWidth:this.model.get("popup_max_width"),maxHeight:this.model.get("popup_max_height")}}update_popup(){l.setOptions(this.obj.getPopup(),this.popup_options()),this.obj.togglePopup(),this.obj.togglePopup()}}class c extends h{}},6464:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletLayerGroupModel:()=>l,LeafletLayerGroupView:()=>n});const i=o(5335),s=o(8197),a=o(4795);class l extends a.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletLayerGroupView",_model_name:"LeafletLayerGroupModel",layers:[]}}}l.serializers={...i.WidgetModel.serializers,layers:{deserialize:i.unpack_models}};class n extends a.LeafletLayerView{create_obj(){this.obj=s.layerGroup(),this.layer_views=new i.ViewList(this.add_layer_model,this.remove_layer_view,this),this.layer_views.update(this.model.get("layers"))}remove_layer_view(e){this.obj.removeLayer(e.obj),e.remove()}add_layer_model(e){return this.create_child_view(e).then((e=>(this.obj.addLayer(e.obj),e)))}model_events(){this.listenTo(this.model,"change:layers",(function(){this.layer_views.update(this.model.get("layers"))}),this)}}},5529:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletPathModel:()=>s,LeafletPathView:()=>a});const i=o(2610);class s extends i.LeafletVectorLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletPathView",_model_name:"LeafletPathModel",stroke:!0,color:"#0033FF",weight:5,fill:!0,fill_color:null,fill_opacity:.2,dash_array:null,line_cap:"round",line_join:"round",pointer_events:""}}}class a extends i.LeafletVectorLayerView{model_events(){var e;super.model_events();for(var t=this.model.get("options"),o=0;o<t.length;o++)e=t[o],this.listenTo(this.model,"change:"+e,(function(){this.obj.setStyle(this.get_options())}),this)}}},5321:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletPolygonModel:()=>a,LeafletPolygonView:()=>l});var i=o(8197),s=o(9770);class a extends s.LeafletPolylineModel{defaults(){return{...super.defaults(),_view_name:"LeafletPolygonView",_model_name:"LeafletPolygonModel"}}}class l extends s.LeafletPolylineView{create_obj(){this.obj=i.polygon(this.model.get("locations"),this.get_options())}}},9770:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletPolylineModel:()=>a,LeafletPolylineView:()=>l});const i=o(8197),s=o(5529);class a extends s.LeafletPathModel{defaults(){return{...super.defaults(),_view_name:"LeafletPolylineView",_model_name:"LeafletPolylineModel",locations:[],smooth_factor:1,no_clip:!0}}}class l extends s.LeafletPathView{create_obj(){this.obj=i.polyline(this.model.get("locations"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:locations",(function(){this.obj.setLatLngs(this.model.get("locations")),this.obj.transform&&this.obj.transform.reset()}),this),this.model.on_some_change(["scaling","uniform_scaling","rotation"],this.update_transform,this),this.listenTo(this.model,"change:draggable",(()=>{this.obj.dragging&&this.obj.dragging[this.model.get("draggable")?"enable":"disable"]()}),this),this.listenTo(this.model,"change:transform",(()=>{this.obj.transform&&this.obj.transform[this.model.get("transform")?"enable":"disable"]()}),this)}update_transform(){this.obj.transform&&this.obj.transform.setOptions({scaling:this.model.get("scaling"),uniformScaling:this.model.get("uniform_scaling"),rotation:this.model.get("rotation")}).enable()}}},6004:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletRasterLayerModel:()=>s,LeafletRasterLayerView:()=>a});const i=o(4795);class s extends i.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletRasterLayerView",_model_name:"LeafletRasterLayerModel",visible:!0}}}class a extends i.LeafletLayerView{model_events(){super.model_events(),this.listenTo(this.model,"change:opacity",(function(){this.model.get("visible")&&this.obj.setOpacity(this.model.get("opacity"))}),this),this.listenTo(this.model,"change:visible",(function(){this.model.get("visible")?this.obj.setOpacity(this.model.get("opacity")):this.obj.setOpacity(0)}),this),this.model.get("visible")?this.obj.setOpacity(this.model.get("opacity")):this.obj.setOpacity(0)}}},6231:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletTileLayerModel:()=>l,LeafletTileLayerView:()=>n});const i=o(8197),s=o(6004),a=o(1235).Spinner;class l extends s.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletTileLayerView",_model_name:"LeafletTileLayerModel",bottom:!0,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",min_zoom:0,max_zoom:18,bounds:null,tile_size:256,attribution:'Map data (c) <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',detect_retina:!1,no_wrap:!1,tms:!1,show_loading:!1,loading:!1}}}class n extends s.LeafletRasterLayerView{create_obj(){this.obj=i.tileLayer(this.model.get("url"),this.get_options()),this.model.on("msg:custom",this.handle_message.bind(this))}leaflet_events(){super.leaflet_events(),this.obj.on("loading",(e=>{this.model.set("loading",!0),this.model.save_changes(),this.model.get("show_loading")&&(this.spinner=(new a).spin(this.map_view.el))})),this.obj.on("load",(e=>{this.model.set("loading",!1),this.model.save_changes(),this.send({event:"load"}),this.model.get("show_loading")&&this.spinner.stop()})),this.obj.on("remove",(e=>{this.model.get("show_loading")&&this.spinner.stop()}))}model_events(){super.model_events(),this.listenTo(this.model,"change:url",(function(){this.obj.setUrl(this.model.get("url"),!0),this.obj.refresh()}),this)}handle_message(e){"redraw"==e.msg&&this.obj.redraw()}}},2610:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletVectorLayerModel:()=>s,LeafletVectorLayerView:()=>a});const i=o(4795);class s extends i.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletVectorLayerView",_model_name:"LeafletVectorLayerModel"}}}class a extends i.LeafletLayerView{}},7859:()=>{"use strict";function e(t){if(!(this instanceof e))return new e(t);this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,this._data=[]}e.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(e){return this._data=e,this},max:function(e){return this._max=e,this},add:function(e){return this._data.push(e),this},clear:function(){return this._data=[],this},radius:function(e,t){t=void 0===t?15:t;var o=this._circle=this._createCanvas(),i=o.getContext("2d"),s=this._r=e+t;return o.width=o.height=2*s,i.shadowOffsetX=i.shadowOffsetY=2*s,i.shadowBlur=t,i.shadowColor="black",i.beginPath(),i.arc(-s,-s,e,0,2*Math.PI,!0),i.closePath(),i.fill(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(e){var t=this._createCanvas(),o=t.getContext("2d"),i=o.createLinearGradient(0,0,0,256);for(var s in t.width=1,t.height=256,e)i.addColorStop(+s,e[s]);return o.fillStyle=i,o.fillRect(0,0,1,256),this._grad=o.getImageData(0,0,1,256).data,this},draw:function(e){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var t=this._ctx;t.clearRect(0,0,this._width,this._height);for(var o,i=0,s=this._data.length;i<s;i++)o=this._data[i],t.globalAlpha=Math.min(Math.max(o[2]/this._max,void 0===e?.05:e),1),t.drawImage(this._circle,o[0]-this._r,o[1]-this._r);var a=t.getImageData(0,0,this._width,this._height);return this._colorize(a.data,this._grad),t.putImageData(a,0,0),this},_colorize:function(e,t){for(var o,i=0,s=e.length;i<s;i+=4)(o=4*e[i+3])&&(e[i]=t[o],e[i+1]=t[o+1],e[i+2]=t[o+2])},_createCanvas:function(){return"undefined"!=typeof document?document.createElement("canvas"):new this._canvas.constructor}},L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({options:{minOpacity:.05,maxZoom:18,radius:25,blur:15,max:1},initialize:function(e,t){this._latlngs=e,L.setOptions(this,t)},setLatLngs:function(e){return this._latlngs=e,this.redraw()},addLatLng:function(e){return this._latlngs.push(e),this.redraw()},setOptions:function(e){return L.setOptions(this,e),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return this._heat&&!this._frame&&this._map&&!this._map._animating&&(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(e){this._map=e,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):e._panes.overlayPane.appendChild(this._canvas),e.on("moveend",this._reset,this),e.options.zoomAnimation&&L.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){this.options.pane?this.getPane().removeChild(this._canvas):e.getPanes().overlayPane.removeChild(this._canvas),e.off("moveend",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),o=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[o]="50% 50%";var i=this._map.getSize();t.width=i.x,t.height=i.y;var s=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(s?"animated":"hide")),this._heat=e(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var e=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,e);var t=this._map.getSize();this._heat._width!==t.x&&(this._canvas.width=this._heat._width=t.x),this._heat._height!==t.y&&(this._canvas.height=this._heat._height=t.y),this._redraw()},_redraw:function(){if(this._map){var e,t,o,i,s,a,l,n,r,d=[],h=this._heat._r,c=this._map.getSize(),p=new L.Bounds(L.point([-h,-h]),c.add([h,h])),m=void 0===this.options.max?1:this.options.max,_=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,u=1/Math.pow(2,Math.max(0,Math.min(_-this._map.getZoom(),12))),g=h/2,f=[],y=this._map._getMapPanePos(),v=y.x%g,w=y.y%g;for(e=0,t=this._latlngs.length;e<t;e++)o=this._map.latLngToContainerPoint(this._latlngs[e]),p.contains(o)&&(s=Math.floor((o.x-v)/g)+2,a=Math.floor((o.y-w)/g)+2,r=(void 0!==this._latlngs[e].alt?this._latlngs[e].alt:void 0!==this._latlngs[e][2]?+this._latlngs[e][2]:1)*u,f[a]=f[a]||[],(i=f[a][s])?(i[0]=(i[0]*i[2]+o.x*r)/(i[2]+r),i[1]=(i[1]*i[2]+o.y*r)/(i[2]+r),i[2]+=r):f[a][s]=[o.x,o.y,r]);for(e=0,t=f.length;e<t;e++)if(f[e])for(l=0,n=f[e].length;l<n;l++)(i=f[e][l])&&d.push([Math.round(i[0]),Math.round(i[1]),Math.min(i[2],m)]);this._heat.data(d).draw(this.options.minOpacity),this._frame=null}},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),o=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,o,t):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(o)+" scale("+t+")"}}),L.heatLayer=function(e,t){return new L.HeatLayer(e,t)}},5650:()=>{L.MagnifyingGlass=L.Layer.extend({options:{radius:100,zoomOffset:3,layers:[],fixedPosition:!1,latLng:[0,0],fixedZoom:-1},initialize:function(e){L.Util.setOptions(this,e),this._fixedZoom=-1!=this.options.fixedZoom,this._mainMap=null,this._glassMap=null},getMap:function(){return this._glassMap},_createMiniMap:function(e){return new L.Map(e,{layers:this.options.layers,zoom:this._getZoom(),maxZoom:this._mainMap.getMaxZoom(),minZoom:this._mainMap.getMinZoom(),crs:this._mainMap.options.crs,fadeAnimation:!1,attributionControl:!1,zoomControl:!1,boxZoom:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,dragging:!1,keyboard:!1})},_getZoom:function(){return this._fixedZoom?this.options.fixedZoom:this._mainMap.getZoom()+this.options.zoomOffset},_updateZoom:function(){this._glassMap.setZoom(this._getZoom())},setRadius:function(e){this.options.radius=e,this._wrapperElt&&(this._wrapperElt.style.width=2*this.options.radius+"px",this._wrapperElt.style.height=2*this.options.radius+"px")},setLatLng:function(e){this.options.latLng=e,this._update(e)},_updateFromMouse:function(e){this._update(e.latlng,e.layerPoint)},_updateFixed:function(){this._update(this.options.latLng)},_update:function(e,t){this._glassMap.setView(e,this._getZoom(),{pan:{animate:!1}}),t=t||this._mainMap.latLngToLayerPoint(e),this._wrapperElt.style.left=t.x-this.options.radius+"px",this._wrapperElt.style.top=t.y-this.options.radius+"px"},onAdd:function(e){this._mainMap=e,this._wrapperElt=L.DomUtil.create("div","leaflet-magnifying-glass");var t=L.DomUtil.create("div","",this._wrapperElt);L.Browser.webkit&&L.DomUtil.addClass(t,"leaflet-magnifying-glass-webkit"),this._glassMap=this._createMiniMap(t),L.DomEvent.addListener(this._wrapperElt,"click",this._fireClick,this);var o=this.options;return this.setRadius(o.radius),this.setLatLng(o.latLng),this._glassMap.whenReady((function(){o.fixedPosition?(this._mainMap.on("zoomend",this._updateFixed,this),L.DomUtil.addClass(this._wrapperElt,"leaflet-zoom-hide")):(this._mainMap.on("mousemove",this._updateFromMouse,this),this._fixedZoom||this._mainMap.on("zoomend",this._updateZoom,this))}),this),e.getPanes().popupPane.appendChild(this._wrapperElt),this._glassMap.invalidateSize(),this},_fireClick:function(e){this.fire("click",e),L.DomEvent.stopPropagation(e)},onRemove:function(e){e.off("viewreset",this._updateFixed,this),e.off("mousemove",this._updateFromMouse,this),e.off("zoomend",this._updateZoom,this);for(var t=0,o=this.options.layers.length;t<o;t++)this._glassMap.removeLayer(this.options.layers[t]);return this._glassMap.remove(),L.DomEvent.removeListener(this._wrapperElt,"click",this._fireClick),e.getPanes().popupPane.removeChild(this._wrapperElt),this._mainMap=null,this}}),L.magnifyingGlass=function(e){return new L.MagnifyingGlass(e)}},8197:(e,t,o)=>{const i=o(1795);o(445),o(8249),o(8808),o(3950),o(7680),o(4519),o(1834),o(6753),o(6336),o(7859),o(5650),o(1509),o(6843),o(474),o(356),o(9574),i.patchGridLayer=function(e){e._refreshTileUrl=function(e,t){var o=new Image;o.onload=function(){i.Util.requestAnimFrame((function(){e.el.src=t}))},o.src=t},e.refresh=function(){var e=this._map._fadeAnimated;for(var t in this._map._fadeAnimated=!1,this._tiles){var o=this._tiles[t];if(o.current&&o.active){var i=o.el.src,s=this.getTileUrl(o.coords);i!=s&&this._refreshTileUrl(o,s)}}e&&setTimeout((function(){this._map._fadeAnimated=e}),5e3)}};var s=i.tileLayer;i.tileLayer=function(e,t){var o=s(e,t);return i.patchGridLayer(o),o},i.tileLayer.wms=function(e,t){var o=s.wms(e,t);return i.patchGridLayer(o),o},e.exports=i},4382:(e,t,o)=>{"use strict";o.r(t),o.d(t,{getProjection:()=>s});const i=o(8197);function s(e){return!1===e.custom?i.CRS[e.name]:new i.Proj.CRS(e.name,e.proj4def,{origin:e.origin,resolutions:e.resolutions,bounds:i.Bounds(e.bounds)})}},3555:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LeafletWidgetView:()=>s,LeafletDOMWidgetView:()=>a});const i=o(5335);class s extends i.WidgetView{}class a extends i.DOMWidgetView{}class l{get_options(){for(var e,t,o=this.model.get("options"),i={},s=0;s<o.length;s++)i[(t=e=o[s],t.toLowerCase().replace(/_(.)/g,(function(e,t){return t.toUpperCase()})))]=this.model.get(e);return i}}function n(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((o=>{Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(t.prototype,o))}))}))}n(s,[l]),n(a,[l])}}]);